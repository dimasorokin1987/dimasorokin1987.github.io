<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name='viewport' content='width=device-width, initial-scale=1' />
  <title>Portfolio.</title>
  <link rel="stylesheet" media="screen and (min-width: 900px)" href="wide.screensize.css" />
  <link rel="stylesheet" media="screen and (max-width: 900px) and (min-width: 600px)" href="medium.screensize.css" />
  <link rel="stylesheet" media="screen and (max-width: 600px)" href="small.screensize.css" />
  <link rel="stylesheet" href="light.theme.css" />
  <link rel="stylesheet" href="dark.theme.css" />
</head>

<body>
  <header>
    <div class='switchers'>
      <div class='locale switcher'>
        <b>locale:</b>
        <label>
          <input type="radio" name="localeRadioButton" value="en_locale">
          <span>en</span>
        </label>
        <label>
          <input type="radio" name="localeRadioButton" value="ru_locale">
          <span>ru</span>
        </label>
        <label>
          <input type="radio" name="localeRadioButton" value="ua_locale">
          <span>ua</span>
        </label>
      </div>
      <div class='theme switcher'>
        <b>theme:</b>
        <label>
          <input type="radio" name="themeRadioButton" value="light_theme">
          <span>light</span>
        </label>
        <label>
          <input type="radio" name="themeRadioButton" value="dark_theme">
          <span>dark</span>
        </label>
      </div>
    </div>
    <div class="clear float"></div>
    <h1 id="about"></h1>
  </header>
  <main>
    <section class="examples">
      <h2 id="projects_header"></h2>
      <ul class="projects">
        <li>
          <a href="/react-dashboard/">react-dashboard</a>
        </li>
        <li>
          <a href="#">mern-url-shortener</a>
        </li>
      </ul>
    </section>
    <div class="clear float"></div>
  </main>
  <footer>
    <ul class="socials">
      <li>
        <a href="https://www.facebook.com/profile.php?id=100008725081649">Facebook</a>
      </li>
      <li>
        <a href="https://www.linkedin.com/in/dima-sorokin-016bbbaa/">LinkedIn</a>
      </li>
    </ul>
  </footer>
  <script>
    const body = document.querySelector('body');
    const themeRadioButtons = document.querySelectorAll('input[name=themeRadioButton]')
    const localeRadioButtons = document.querySelectorAll('input[name=localeRadioButton]')

    const applyTheme = theme => {
      let currentTheme = [...body.classList].find(cl=>cl.endsWith('_theme'));
      if(currentTheme){
        body.classList.replace(currentTheme, theme);
      }else{
        body.classList.add(theme);
      }
    };

    const texts = {
      en_locale: {
        about: 'Hello, I am Dima Sorokin. And this is my portfolio.',
        projects_header: 'Some of my projects:'
      },
      ru_locale: {
        about: 'Привет, я Дима Сорокин. И это мое портфолио.',
        projects_header: 'Некоторые из моих проектов:'
      },
      ua_locale: {
        about: 'Привіт, я Діма Сорокін. І це моє портфоліо.',
        projects_header: 'Деякі з моїх проектів:'
      },
    };

    const updateTexts = lang => {
      Object.entries(texts[lang]).forEach(([id,text]) => {
        document.getElementById(id).innerHTML = text;
      });
    };

    themeRadioButtons.forEach(themeRadioButton=>{
      themeRadioButton.addEventListener('change', e=>{
        let theme = e.target.value;
        console.log(theme);
        localStorage.storedTheme = theme;
        applyTheme(theme);
      }, false);
    });

    localeRadioButtons.forEach(btn=>{
      btn.addEventListener('change', e=>{
        let locale = e.target.value;
        console.log(locale);
        localStorage.storedLocale = locale;
        updateTexts(locale);
      }, false);
    });

    const changeTheme = theme => {
      themeRadioButtons.forEach(btn=>{
        if(btn.value === theme) btn.click();
      });
    };
    const changeLocale = locale => {
      localeRadioButtons.forEach(btn=>{
        if(btn.value === locale) btn.click();
      });
    };

    //applyTheme('light_theme');
    let storedTheme = localStorage.storedTheme || 'light_theme';
    let storedLocale = localStorage.storedLocale || 'en_locale';
   
    changeTheme(storedTheme);
    changeLocale(storedLocale);
  </script>
</body>
</html>