<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name='viewport' content='width=device-width, initial-scale=1' />
  <title>Portfolio.</title>
  <link rel="stylesheet" href="common.css" />
  <link rel="stylesheet" media="screen and (min-width: 900px)" href="wide.screensize.css" />
  <link rel="stylesheet" media="screen and (max-width: 900px) and (min-width: 600px)" href="medium.screensize.css" />
  <link rel="stylesheet" media="screen and (max-width: 600px)" href="small.screensize.css" />
  <link rel="stylesheet" href="light.theme.css" />
  <link rel="stylesheet" href="dark.theme.css" />
</head>

<body>
  <header>
    <label id="nav">
      Navigate to
      <select onchange="location.href=this.value">
        <option value="#top">top</option>
        <option value="#projects">projects</option>
        <option value="#skills">skills</option>
        <option value="#contacts">contacts</option>
        <option value="#socials">socials</option>
      </select>
    </label>
    <div id="top"></div>
    <div class="switchers">
      <div class="locale switcher">
        <b>locale:</b>
        <label>
          <input type="radio" name="localeRadioButton" value="en_locale">
          <span>en</span>
        </label>
        <label>
          <input type="radio" name="localeRadioButton" value="ru_locale">
          <span>ru</span>
        </label>
        <label>
          <input type="radio" name="localeRadioButton" value="ua_locale">
          <span>ua</span>
        </label>
      </div>
      <div class="theme switcher">
        <b>theme:</b>
        <label>
          <input type="radio" name="themeRadioButton" value="light_theme">
          <span>light</span>
        </label>
        <label>
          <input type="radio" name="themeRadioButton" value="dark_theme">
          <span>dark</span>
        </label>
      </div>
    </div>
    <div class="clear float"></div>
  </header>
  <main>
    <h1 class="header"></h1>
    <section id="projects">
      <h2 class="header"></h2>
      <ul>
        <li>
          <a href="/react-dashboard/" target="_blank">react-dashboard</a>
        </li>
        <li>
          <a href="#" target="_blank">mern-url-shortener</a>
        </li>
      </ul>
    </section>
    <div class="clear float"></div>
    <section id="skills">
      <h2 class="header"></h2>
      <ul>
        <li>
          <div class='js letter skill icon'>JS</div>
        </li>
        <li>
          <img src='js.icon.svg' />
        </li>
      </ul>
    </section>
    <section id="contacts">
      <h2 class="header"></h2>
      <ul>
        <li>
          <div class='js letter skill icon'>JS</div>
        </li>
      </ul>
    </section>
  </main>
  <footer>
    <section id="socials">
      <ul>
        <li>
          <a href="https://www.facebook.com/profile.php?id=100008725081649" target="_blank">
            <span class="facebook letter icon">f</span>
          </a>
        </li>
        <li>
          <a href="https://www.linkedin.com/in/dima-sorokin-016bbbaa/" target="_blank">
            <span class="linkedin letter icon">in</span>
          </a>
        </li>
      </ul>
    </section>
  </footer>
  <script>
    const body = document.querySelector('body');
    const themeRadioButtons = document.querySelectorAll('input[name=themeRadioButton]')
    const localeRadioButtons = document.querySelectorAll('input[name=localeRadioButton]')

    const applyTheme = theme => {
      let currentTheme = [...body.classList].find(cl=>cl.endsWith('_theme'));
      if(currentTheme){
        body.classList.replace(currentTheme, theme);
      }else{
        body.classList.add(theme);
      }
    };

    const texts = {
      en_locale: {
        "main .header": "Hello, I am Dima Sorokin. And this is my portfolio.",
        "#projects .header": "Some of my projects:",
        "#skills .header": "Skills:",
        "#contacts .header": "Contacts:"
      },
      ru_locale: {
        "main .header": "Привет, я Дима Сорокин. И это мое портфолио.",
        "#projects .header": "Некоторые из моих проектов:",
        "#skills .header": "Скилы:",
        "#contacts .header": "Контакты:"
      },
      ua_locale: {
        "main .header": "Привіт, я Діма Сорокін. І це моє портфоліо.",
        "#projects .header": "Деякі з моїх проектів:",
        "#skills .header": "Навички:",
        "#contacts .header": "Зв`язок:"
      }
    };

    const updateTexts = lang => {
      Object.entries(texts[lang]).forEach(([selector,text]) => {
        document.querySelector(selector).innerHTML = text;
      });
    };

    themeRadioButtons.forEach(themeRadioButton=>{
      themeRadioButton.addEventListener('change', e=>{
        let theme = e.target.value;
        console.log(theme);
        localStorage.storedTheme = theme;
        applyTheme(theme);
      }, false);
    });

    localeRadioButtons.forEach(btn=>{
      btn.addEventListener('change', e=>{
        let locale = e.target.value;
        console.log(locale);
        localStorage.storedLocale = locale;
        updateTexts(locale);
      }, false);
    });

    const changeTheme = theme => {
      themeRadioButtons.forEach(btn=>{
        if(btn.value === theme) btn.click();
      });
    };
    const changeLocale = locale => {
      localeRadioButtons.forEach(btn=>{
        if(btn.value === locale) btn.click();
      });
    };

    //applyTheme('light_theme');
    let storedTheme = localStorage.storedTheme || 'light_theme';
    let storedLocale = localStorage.storedLocale || 'en_locale';
   
    changeTheme(storedTheme);
    changeLocale(storedLocale);
  </script>
</body>
</html>